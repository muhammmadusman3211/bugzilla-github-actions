{"ast":null,"code":"import { SIGN_IN_USER, SIGN_UP_USER, SIGN_UP_ERROR, SIGN_UP_LOADING, SIGN_OUT_USER, AUTHORIZE_LOG_IN, CREATE_BUG, CREATE_PROJECT, EDIT_PROJECT, SEND_EMAIL, CHANGE_PASSWORD } from './constants';\nimport { AUTHORIZED_ROUTE } from './constants';\nimport { LogoutApi, AuthLoginApi, AuthApi, CreateBugApi, CreateProjectApi, EditProjectApi, SendEmailApi, ChangePasswordApi } from '../../api/api';\nexport const signUpUser = (url, data, setLoading, navigate) => async dispatch => {\n  try {\n    dispatch({\n      type: SIGN_UP_LOADING,\n      loading: true\n    });\n    const response = await AuthApi(url, data);\n    console.log('USER', user);\n\n    if (response.status === 'ok') {\n      dispatch({\n        type: SIGN_UP_USER,\n        user: response,\n        loading: false\n      });\n      navigate('/login');\n    } else dispatch({\n      type: SIGN_UP_ERROR,\n      error: response.error\n    });\n  } catch (err) {\n    dispatch({\n      type: SIGN_UP_ERROR,\n      error: err\n    });\n  }\n};\nexport const signInUser = (url, data, setLoading, setError, openSnackbar, navigate) => async dispatch => {\n  try {\n    var _user$response;\n\n    let user = await AuthApi(url, data);\n\n    if ((user === null || user === void 0 ? void 0 : (_user$response = user.response) === null || _user$response === void 0 ? void 0 : _user$response.status) === 401) {\n      setError(user.response.data.message);\n      setLoading(false);\n      openSnackbar(user.response.data.message);\n      dispatch({\n        type: SIGN_IN_USER,\n        payload: user.response.data.message\n      });\n    } else {\n      localStorage.setItem('profile', JSON.stringify(user.data.body));\n      localStorage.setItem('token', JSON.stringify(user.data.token));\n      setLoading(false);\n      openSnackbar('You have sucessfully Signed In');\n      dispatch({\n        type: SIGN_IN_USER,\n        payload: user\n      });\n      navigate('/view-projects');\n    }\n  } catch (err) {\n    console.log('THUNK ERROR', err);\n  }\n};\nexport const authorizeLogIn = (url, data, openSnackbar) => async dispatch => {\n  try {\n    const user = await AuthLoginApi(url, data);\n    dispatch({\n      type: AUTHORIZE_LOG_IN,\n      payload: user\n    });\n    if (user.data.message !== AUTHORIZED_ROUTE) openSnackbar('You are not Authorized');\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const signOutUser = (url, setLoading, openSnackbar, navigate) => async dispatch => {\n  try {\n    await LogoutApi(url);\n    localStorage.removeItem('profile');\n    localStorage.removeItem('token');\n    dispatch({\n      type: SIGN_OUT_USER\n    });\n    setLoading(false);\n    openSnackbar('You have sucessfully Logged Out');\n    navigate('/login');\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const createBug = (url, data, setLoading, setImage, openSnackbar, navigate) => async dispatch => {\n  try {\n    const res = await CreateBugApi(url, data);\n    setImage(res.data.bug.image.path);\n    dispatch({\n      type: CREATE_BUG\n    });\n    setLoading(false);\n    openSnackbar('Bug Created');\n    navigate('/view-projects');\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const createProject = (url, data, setLoading, setErrors, openSnackbar, navigate) => async dispatch => {\n  try {\n    var _response$response;\n\n    const response = await CreateProjectApi(url, data);\n\n    if ((response === null || response === void 0 ? void 0 : (_response$response = response.response) === null || _response$response === void 0 ? void 0 : _response$response.status) === 401) {\n      setErrors(response.response.data.message.name);\n      openSnackbar(response.response.data.message.name);\n      setLoading(false);\n    } else {\n      dispatch({\n        type: CREATE_PROJECT\n      });\n      setLoading(false);\n      openSnackbar('Project Created');\n      navigate('/view-projects');\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const editProject = (url, data, setLoading, setError, openSnackbar, navigate) => async dispatch => {\n  try {\n    const res = await EditProjectApi(url, data);\n    dispatch({\n      type: EDIT_PROJECT\n    });\n    setLoading(false);\n    openSnackbar('Project Edited');\n    navigate('/view-projects');\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const sendEmail = (url, data, openSnackbar, navigate) => async dispatch => {\n  try {\n    const res = await SendEmailApi(url, data);\n    openSnackbar(res.data.message);\n    dispatch({\n      type: SEND_EMAIL\n    });\n    navigate('/change-password');\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const changePassword = (url, data, openSnackbar, navigate) => async dispatch => {\n  try {\n    const res = await ChangePasswordApi(url, data);\n    openSnackbar(res.data.message);\n    navigate('/login');\n    dispatch({\n      type: CHANGE_PASSWORD\n    });\n  } catch (err) {\n    console.log(err);\n  }\n};","map":{"version":3,"names":["SIGN_IN_USER","SIGN_UP_USER","SIGN_UP_ERROR","SIGN_UP_LOADING","SIGN_OUT_USER","AUTHORIZE_LOG_IN","CREATE_BUG","CREATE_PROJECT","EDIT_PROJECT","SEND_EMAIL","CHANGE_PASSWORD","AUTHORIZED_ROUTE","LogoutApi","AuthLoginApi","AuthApi","CreateBugApi","CreateProjectApi","EditProjectApi","SendEmailApi","ChangePasswordApi","signUpUser","url","data","setLoading","navigate","dispatch","type","loading","response","console","log","user","status","error","err","signInUser","setError","openSnackbar","message","payload","localStorage","setItem","JSON","stringify","body","token","authorizeLogIn","signOutUser","removeItem","createBug","setImage","res","bug","image","path","createProject","setErrors","name","editProject","sendEmail","changePassword"],"sources":["/home/dev/Documents/bugzilla/server/client/src/redux/actions/userActions.js"],"sourcesContent":["import {\n  SIGN_IN_USER,\n  SIGN_UP_USER,\n  SIGN_UP_ERROR,\n  SIGN_UP_LOADING,\n  SIGN_OUT_USER,\n  AUTHORIZE_LOG_IN,\n  CREATE_BUG,\n  CREATE_PROJECT,\n  EDIT_PROJECT,\n  SEND_EMAIL,\n  CHANGE_PASSWORD,\n} from './constants'\nimport { AUTHORIZED_ROUTE } from './constants'\nimport {\n  LogoutApi,\n  AuthLoginApi,\n  AuthApi,\n  CreateBugApi,\n  CreateProjectApi,\n  EditProjectApi,\n  SendEmailApi,\n  ChangePasswordApi,\n} from '../../api/api'\n\nexport const signUpUser =\n  (url, data, setLoading, navigate) => async (dispatch) => {\n    try {\n      dispatch({ type: SIGN_UP_LOADING, loading: true })\n      const response = await AuthApi(url, data)\n      console.log('USER', user)\n      if (response.status === 'ok') {\n        dispatch({ type: SIGN_UP_USER, user: response, loading: false })\n        navigate('/login')\n      } else dispatch({ type: SIGN_UP_ERROR, error: response.error })\n    } catch (err) {\n      dispatch({ type: SIGN_UP_ERROR, error: err })\n    }\n  }\n\nexport const signInUser =\n  (url, data, setLoading, setError, openSnackbar, navigate) =>\n  async (dispatch) => {\n    try {\n      let user = await AuthApi(url, data)\n      if (user?.response?.status === 401) {\n        setError(user.response.data.message)\n        setLoading(false)\n        openSnackbar(user.response.data.message)\n        dispatch({ type: SIGN_IN_USER, payload: user.response.data.message })\n      } else {\n        localStorage.setItem('profile', JSON.stringify(user.data.body))\n        localStorage.setItem('token', JSON.stringify(user.data.token))\n        setLoading(false)\n        openSnackbar('You have sucessfully Signed In')\n        dispatch({ type: SIGN_IN_USER, payload: user })\n        navigate('/view-projects')\n      }\n    } catch (err) {\n      console.log('THUNK ERROR', err)\n    }\n  }\n\nexport const authorizeLogIn = (url, data, openSnackbar) => async (dispatch) => {\n  try {\n    const user = await AuthLoginApi(url, data)\n    dispatch({ type: AUTHORIZE_LOG_IN, payload: user })\n    if (user.data.message !== AUTHORIZED_ROUTE)\n      openSnackbar('You are not Authorized')\n  } catch (err) {\n    console.log(err)\n  }\n}\n\nexport const signOutUser =\n  (url, setLoading, openSnackbar, navigate) => async (dispatch) => {\n    try {\n      await LogoutApi(url)\n      localStorage.removeItem('profile')\n      localStorage.removeItem('token')\n      dispatch({ type: SIGN_OUT_USER })\n      setLoading(false)\n      openSnackbar('You have sucessfully Logged Out')\n      navigate('/login')\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\nexport const createBug =\n  (url, data, setLoading, setImage, openSnackbar, navigate) =>\n  async (dispatch) => {\n    try {\n      const res = await CreateBugApi(url, data)\n      setImage(res.data.bug.image.path)\n      dispatch({ type: CREATE_BUG })\n      setLoading(false)\n      openSnackbar('Bug Created')\n      navigate('/view-projects')\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\nexport const createProject =\n  (url, data, setLoading, setErrors, openSnackbar, navigate) =>\n  async (dispatch) => {\n    try {\n      const response = await CreateProjectApi(url, data)\n      if (response?.response?.status === 401) {\n        setErrors(response.response.data.message.name)\n        openSnackbar(response.response.data.message.name)\n        setLoading(false)\n      } else {\n        dispatch({ type: CREATE_PROJECT })\n        setLoading(false)\n        openSnackbar('Project Created')\n        navigate('/view-projects')\n      }\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\nexport const editProject =\n  (url, data, setLoading, setError, openSnackbar, navigate) =>\n  async (dispatch) => {\n    try {\n      const res = await EditProjectApi(url, data)\n      dispatch({ type: EDIT_PROJECT })\n      setLoading(false)\n      openSnackbar('Project Edited')\n      navigate('/view-projects')\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\nexport const sendEmail =\n  (url, data, openSnackbar, navigate) => async (dispatch) => {\n    try {\n      const res = await SendEmailApi(url, data)\n      openSnackbar(res.data.message)\n      dispatch({ type: SEND_EMAIL })\n      navigate('/change-password')\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\nexport const changePassword =\n  (url, data, openSnackbar, navigate) => async (dispatch) => {\n    try {\n      const res = await ChangePasswordApi(url, data)\n      openSnackbar(res.data.message)\n      navigate('/login')\n      dispatch({ type: CHANGE_PASSWORD })\n    } catch (err) {\n      console.log(err)\n    }\n  }\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}