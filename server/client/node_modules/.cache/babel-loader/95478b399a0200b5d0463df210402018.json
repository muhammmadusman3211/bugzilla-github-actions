{"ast":null,"code":"import _toConsumableArray from\"/home/dev/Documents/bugzilla/server/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/dev/Documents/bugzilla/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{useDispatch}from\"react-redux\";import{useLocation}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import Calendar from\"react-calendar\";import useGetDevelopers from\"../../helpers/hooks/useGetDevelopers\";import{createBug}from\"../../redux/actions/userActions\";import\"react-calendar/dist/Calendar.css\";import Header from\"../Header/Header\";import styles from\"../../assets/scss/createbug.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CreateBug=function CreateBug(){var _typeRef$current;var titleRef=useRef();var statusRef=useRef();var typeRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),developersList=_useState4[0],setDevelopersList=_useState4[1];var navigate=useNavigate();var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(new Date()),_useState8=_slicedToArray(_useState7,2),date=_useState8[0],setDate=_useState8[1];var _useLocation=useLocation(),state=_useLocation.state;var developers=useGetDevelopers();var dispatch=useDispatch();var url=process.env.REACT_APP_CREATE_BUG;var user=JSON.parse(localStorage.getItem(\"profile\"));console.log(user.email);var onChange=function onChange(e){setImage(e.target.files[0]);};var addDeveloperToList=function addDeveloperToList(developer){setDevelopersList([].concat(_toConsumableArray(developersList),[developer]));console.log(developersList);};var onSubmit=function onSubmit(event){event.preventDefault();var formData=new FormData();formData.append(\"projectId\",state===null||state===void 0?void 0:state.id);formData.append(\"creator\",user._id);formData.append(\"title\",titleRef.current.value);formData.append(\"status\",statusRef.current.value);formData.append(\"type\",typeRef.current.value);formData.append(\"deadline\",date.toLocaleDateString());formData.append(\"file\",image);if(developersList.length>0)formData.append(\"developers\",developersList);if(titleRef&&typeRef&&statusRef){dispatch(createBug(url,formData,setLoading,setImage));navigate(\"/view-projects\");}else console.log(\"Cannot be empty\");};useEffect(function(){},[image]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"create-bug-wrapper \",children:/*#__PURE__*/_jsxs(\"form\",{action:\"/create-bug\",method:\"post\",encType:\"multipart/form-data\",className:\"d-flex flex-column w-50 m-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"BUG\"}),/*#__PURE__*/_jsx(\"input\",{value:state===null||state===void 0?void 0:state.id}),/*#__PURE__*/_jsx(\"label\",{children:\"Bug Creator\"}),/*#__PURE__*/_jsx(\"input\",{value:user.name,disabled:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{ref:titleRef,required:true}),/*#__PURE__*/_jsx(\"label\",{children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{ref:typeRef,required:true,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Feature\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Bug\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{ref:statusRef,required:true,children:[/*#__PURE__*/_jsx(\"option\",{children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Started\"}),(typeRef===null||typeRef===void 0?void 0:(_typeRef$current=typeRef.current)===null||_typeRef$current===void 0?void 0:_typeRef$current.value)===\"Bug\"?/*#__PURE__*/_jsx(\"option\",{children:\"Resolved\"}):/*#__PURE__*/_jsx(\"option\",{children:\"Completed\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Deadline\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{value:date.toLocaleDateString(),disabled:true}),/*#__PURE__*/_jsx(Calendar,{onChange:setDate,value:date,minDate:new Date(),defaultView:\"month\"})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Attach Screenshot\"}),/*#__PURE__*/_jsx(\"input\",{accept:\".png, .gif\",className:\"image-upload\",type:\"file\",name:\"image\",onChange:onChange,width:\"100px\",height:\"100px\"}),/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:3000/\".concat(image),alt:\"\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.createBugBtn,onClick:onSubmit,children:\"Create Bug\"})]})})]});};export default CreateBug;","map":{"version":3,"names":["useEffect","useRef","useState","useDispatch","useLocation","useNavigate","Calendar","useGetDevelopers","createBug","Header","styles","CreateBug","titleRef","statusRef","typeRef","loading","setLoading","developersList","setDevelopersList","navigate","image","setImage","Date","date","setDate","state","developers","dispatch","url","process","env","REACT_APP_CREATE_BUG","user","JSON","parse","localStorage","getItem","console","log","email","onChange","e","target","files","addDeveloperToList","developer","onSubmit","event","preventDefault","formData","FormData","append","id","_id","current","value","toLocaleDateString","length","name","createBugBtn"],"sources":["/home/dev/Documents/bugzilla/server/client/src/components/Bug/CreateBug.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\"\nimport { useDispatch } from \"react-redux\"\nimport { useLocation } from \"react-router-dom\"\nimport { useNavigate } from \"react-router-dom\"\nimport Calendar from \"react-calendar\"\nimport useGetDevelopers from \"../../helpers/hooks/useGetDevelopers\"\n\nimport { createBug } from \"../../redux/actions/userActions\"\n\nimport \"react-calendar/dist/Calendar.css\"\nimport Header from \"../Header/Header\"\n\nimport styles from \"../../assets/scss/createbug.module.css\"\nconst CreateBug = () => {\n  const titleRef = useRef()\n  const statusRef = useRef()\n  const typeRef = useRef()\n  const [loading, setLoading] = useState(false)\n  const [developersList, setDevelopersList] = useState([])\n  const navigate = useNavigate()\n  const [image, setImage] = useState(\"\")\n  const [date, setDate] = useState(new Date())\n  const { state } = useLocation()\n\n  const developers = useGetDevelopers()\n  const dispatch = useDispatch()\n  const url = process.env.REACT_APP_CREATE_BUG\n  const user = JSON.parse(localStorage.getItem(\"profile\"))\n  console.log(user.email)\n  const onChange = (e) => {\n    setImage(e.target.files[0])\n  }\n\n  const addDeveloperToList = (developer) => {\n    setDevelopersList([...developersList, developer])\n    console.log(developersList)\n  }\n\n  const onSubmit = (event) => {\n    event.preventDefault()\n    let formData = new FormData()\n    formData.append(\"projectId\", state?.id)\n    formData.append(\"creator\", user._id)\n    formData.append(\"title\", titleRef.current.value)\n    formData.append(\"status\", statusRef.current.value)\n    formData.append(\"type\", typeRef.current.value)\n    formData.append(\"deadline\", date.toLocaleDateString())\n    formData.append(\"file\", image)\n    if (developersList.length > 0) formData.append(\"developers\", developersList)\n    if (titleRef && typeRef && statusRef) {\n      dispatch(createBug(url, formData, setLoading, setImage))\n      navigate(\"/view-projects\")\n    } else console.log(\"Cannot be empty\")\n  }\n  useEffect(() => {}, [image])\n  return (\n    <>\n      <Header />\n      <div className=\"create-bug-wrapper \">\n        <form\n          action=\"/create-bug\"\n          method=\"post\"\n          encType=\"multipart/form-data\"\n          className=\"d-flex flex-column w-50 m-4\"\n        >\n          <h2>BUG</h2>\n          <input value={state?.id} />\n          <label>Bug Creator</label>\n          <input value={user.name} disabled></input>\n\n          <label>Title</label>\n          <input ref={titleRef} required></input>\n\n          <label>Type</label>\n          <select ref={typeRef} required>\n            <option>Feature</option>\n            <option>Bug</option>\n          </select>\n          <label>Status</label>\n          <select ref={statusRef} required>\n            <option>New</option>\n            <option>Started</option>\n\n            {typeRef?.current?.value === \"Bug\" ? (\n              <option>Resolved</option>\n            ) : (\n              <option>Completed</option>\n            )}\n          </select>\n          <div>\n            <label>Deadline</label> <br />\n            <input value={date.toLocaleDateString()} disabled />\n            <Calendar\n              onChange={setDate}\n              value={date}\n              minDate={new Date()}\n              defaultView=\"month\"\n            />\n          </div>\n\n          <label>Attach Screenshot</label>\n          <input\n            accept=\".png, .gif\"\n            className=\"image-upload\"\n            type=\"file\"\n            name=\"image\"\n            onChange={onChange}\n            width=\"100px\"\n            height=\"100px\"\n          />\n          <img src={`http://localhost:3000/${image}`} alt=\"\"></img>\n\n          <button className={styles.createBugBtn} onClick={onSubmit}>\n            Create Bug\n          </button>\n        </form>\n      </div>\n    </>\n  )\n}\n\nexport default CreateBug\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}