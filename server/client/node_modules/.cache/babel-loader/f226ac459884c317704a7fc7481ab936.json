{"ast":null,"code":"import _slicedToArray from\"/home/dev/Documents/bugzilla/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef}from\"react\";import{useDispatch}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{useSnackbar}from\"react-simple-snackbar\";import{useFormik}from\"formik\";import*as yup from\"yup\";import{options}from\"../helpers/options\";import{signInUser}from\"../redux/actions/userActions\";import{Header,Spinner}from\"../components\";import{LoginStyles}from\"../assets/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useSnackbar=useSnackbar(options),_useSnackbar2=_slicedToArray(_useSnackbar,1),openSnackbar=_useSnackbar2[0];var user=localStorage.getItem(\"profile\");var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var dispatch=useDispatch();var navigate=useNavigate();var url=process.env.REACT_APP_SESSION_URL;var formik=useFormik({initialValues:{email:\"\",password:\"\"},validationSchema:yup.object({email:yup.string().email(\"Invalid Email Address\").required(\"Email is required\"),password:yup.string().required(\"Password is required\").min(5,\"Length should be greater than 5\")}),onSubmit:function onSubmit(values){setLoading(true);dispatch(signInUser(url,{email:values.email,password:values.password},setLoading,setError,openSnackbar));}});if(user)navigate(\"/\");return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),loading?/*#__PURE__*/_jsx(Spinner,{}):/*#__PURE__*/_jsxs(\"form\",{className:LoginStyles.loginForm,onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",onChange:formik.handleChange,value:formik.values.email}),formik.errors.email&&formik.errors.email,/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",onChange:formik.handleChange,value:formik.values.password}),formik.errors.password&&formik.errors.password,error,/*#__PURE__*/_jsx(\"button\",{className:LoginStyles.submitButton,type:\"submit\",children:\"Submit\"})]})]});};export default Login;","map":{"version":3,"names":["useState","useRef","useDispatch","useNavigate","useSnackbar","useFormik","yup","options","signInUser","Header","Spinner","LoginStyles","Login","openSnackbar","user","localStorage","getItem","loading","setLoading","error","setError","dispatch","navigate","url","process","env","REACT_APP_SESSION_URL","formik","initialValues","email","password","validationSchema","object","string","required","min","onSubmit","values","loginForm","handleSubmit","handleChange","errors","submitButton"],"sources":["/home/dev/Documents/bugzilla/server/client/src/auth/Login.js"],"sourcesContent":["import { useState, useRef } from \"react\"\nimport { useDispatch } from \"react-redux\"\nimport { useNavigate } from \"react-router-dom\"\nimport { useSnackbar } from \"react-simple-snackbar\"\nimport { useFormik } from \"formik\"\nimport * as yup from \"yup\"\n\nimport { options } from \"../helpers/options\"\nimport { signInUser } from \"../redux/actions/userActions\"\nimport { Header, Spinner } from \"../components\"\n\nimport { LoginStyles } from \"../assets/index\"\n\nconst Login = () => {\n  const [openSnackbar] = useSnackbar(options)\n  const user = localStorage.getItem(\"profile\")\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState()\n\n  const dispatch = useDispatch()\n  const navigate = useNavigate()\n  const url = process.env.REACT_APP_SESSION_URL\n\n  const formik = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\",\n    },\n    validationSchema: yup.object({\n      email: yup\n        .string()\n        .email(\"Invalid Email Address\")\n        .required(\"Email is required\"),\n      password: yup\n        .string()\n        .required(\"Password is required\")\n        .min(5, \"Length should be greater than 5\"),\n    }),\n\n    onSubmit: (values) => {\n      setLoading(true)\n      dispatch(\n        signInUser(\n          url,\n          {\n            email: values.email,\n            password: values.password,\n          },\n          setLoading,\n          setError,\n          openSnackbar\n        )\n      )\n    },\n  })\n\n  if (user) navigate(\"/\")\n  return (\n    <div>\n      <Header />\n      {loading ? (\n        <Spinner />\n      ) : (\n        <form className={LoginStyles.loginForm} onSubmit={formik.handleSubmit}>\n          <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            onChange={formik.handleChange}\n            value={formik.values.email}\n          ></input>\n          {formik.errors.email && formik.errors.email}\n          <input\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Password\"\n            onChange={formik.handleChange}\n            value={formik.values.password}\n          ></input>\n          {formik.errors.password && formik.errors.password}\n          {error}\n          <button className={LoginStyles.submitButton} type=\"submit\">\n            Submit\n          </button>\n        </form>\n      )}\n    </div>\n  )\n}\n\nexport default Login\n"],"mappings":"gIAAA,OAASA,QAAT,CAAmBC,MAAnB,KAAiC,OAAjC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,KAA4B,uBAA5B,CACA,OAASC,SAAT,KAA0B,QAA1B,CACA,MAAO,GAAKC,IAAZ,KAAqB,KAArB,CAEA,OAASC,OAAT,KAAwB,oBAAxB,CACA,OAASC,UAAT,KAA2B,8BAA3B,CACA,OAASC,MAAT,CAAiBC,OAAjB,KAAgC,eAAhC,CAEA,OAASC,WAAT,KAA4B,iBAA5B,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CAClB,iBAAuBR,WAAW,CAACG,OAAD,CAAlC,8CAAOM,YAAP,kBACA,GAAMC,KAAI,CAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAb,CACA,cAA8BhB,QAAQ,CAAC,KAAD,CAAtC,wCAAOiB,OAAP,eAAgBC,UAAhB,eACA,eAA0BlB,QAAQ,EAAlC,yCAAOmB,KAAP,eAAcC,QAAd,eAEA,GAAMC,SAAQ,CAAGnB,WAAW,EAA5B,CACA,GAAMoB,SAAQ,CAAGnB,WAAW,EAA5B,CACA,GAAMoB,IAAG,CAAGC,OAAO,CAACC,GAAR,CAAYC,qBAAxB,CAEA,GAAMC,OAAM,CAAGtB,SAAS,CAAC,CACvBuB,aAAa,CAAE,CACbC,KAAK,CAAE,EADM,CAEbC,QAAQ,CAAE,EAFG,CADQ,CAKvBC,gBAAgB,CAAEzB,GAAG,CAAC0B,MAAJ,CAAW,CAC3BH,KAAK,CAAEvB,GAAG,CACP2B,MADI,GAEJJ,KAFI,CAEE,uBAFF,EAGJK,QAHI,CAGK,mBAHL,CADoB,CAK3BJ,QAAQ,CAAExB,GAAG,CACV2B,MADO,GAEPC,QAFO,CAEE,sBAFF,EAGPC,GAHO,CAGH,CAHG,CAGA,iCAHA,CALiB,CAAX,CALK,CAgBvBC,QAAQ,CAAE,kBAACC,MAAD,CAAY,CACpBnB,UAAU,CAAC,IAAD,CAAV,CACAG,QAAQ,CACNb,UAAU,CACRe,GADQ,CAER,CACEM,KAAK,CAAEQ,MAAM,CAACR,KADhB,CAEEC,QAAQ,CAAEO,MAAM,CAACP,QAFnB,CAFQ,CAMRZ,UANQ,CAORE,QAPQ,CAQRP,YARQ,CADJ,CAAR,CAYD,CA9BsB,CAAD,CAAxB,CAiCA,GAAIC,IAAJ,CAAUQ,QAAQ,CAAC,GAAD,CAAR,CACV,mBACE,oCACE,KAAC,MAAD,IADF,CAEGL,OAAO,cACN,KAAC,OAAD,IADM,cAGN,cAAM,SAAS,CAAEN,WAAW,CAAC2B,SAA7B,CAAwC,QAAQ,CAAEX,MAAM,CAACY,YAAzD,wBACE,cACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,OAFP,CAGE,WAAW,CAAC,OAHd,CAIE,QAAQ,CAAEZ,MAAM,CAACa,YAJnB,CAKE,KAAK,CAAEb,MAAM,CAACU,MAAP,CAAcR,KALvB,EADF,CAQGF,MAAM,CAACc,MAAP,CAAcZ,KAAd,EAAuBF,MAAM,CAACc,MAAP,CAAcZ,KARxC,cASE,cACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,UAFP,CAGE,WAAW,CAAC,UAHd,CAIE,QAAQ,CAAEF,MAAM,CAACa,YAJnB,CAKE,KAAK,CAAEb,MAAM,CAACU,MAAP,CAAcP,QALvB,EATF,CAgBGH,MAAM,CAACc,MAAP,CAAcX,QAAd,EAA0BH,MAAM,CAACc,MAAP,CAAcX,QAhB3C,CAiBGX,KAjBH,cAkBE,eAAQ,SAAS,CAAER,WAAW,CAAC+B,YAA/B,CAA6C,IAAI,CAAC,QAAlD,oBAlBF,GALJ,GADF,CA+BD,CA3ED,CA6EA,cAAe9B,MAAf"},"metadata":{},"sourceType":"module"}