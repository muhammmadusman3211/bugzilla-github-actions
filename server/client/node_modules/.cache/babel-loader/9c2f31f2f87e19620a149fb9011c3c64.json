{"ast":null,"code":"import _toConsumableArray from\"/home/dev/Documents/bugzilla/server/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/dev/Documents/bugzilla/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{useDispatch}from\"react-redux\";import{useAuthorize}from\"../../helpers/hooks/useAuthorize\";import useGetDevelopers from\"../../helpers/hooks/useGetDevelopers\";import{useLocation}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{useSnackbar}from\"react-simple-snackbar/dist\";import{createProject}from\"../../redux/actions/userActions\";import{editProject}from\"../../redux/actions/userActions\";import{Header}from\"../index\";import styles from\"../../assets/scss/createprojects.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CreateProjects=function CreateProjects(){var isAuthorized=useAuthorize(\"projects\");var developers=useGetDevelopers();var titleRef=useRef();var idRef=useRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),developersList=_useState2[0],setDevelopersList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),developersNameList=_useState4[0],setDevelopersNameList=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var dispatch=useDispatch();var navigate=useNavigate();var user=JSON.parse(localStorage.getItem(\"profile\"));var _useLocation=useLocation(),state=_useLocation.state;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var create_url=process.env.REACT_APP_CREATE_PROJECT;var edit_url=process.env.REACT_APP_EDIT_PROJECT;var addDeveloperToList=function addDeveloperToList(developerId){if(developersList.includes(developerId))setDevelopersList(function(developersList){return developersList.filter(function(dev){return dev===developerId;});});else setDevelopersList([].concat(_toConsumableArray(developersList),[developerId]));};var addDevelopersNameToList=function addDevelopersNameToList(name){if(developersNameList.includes(name))setDevelopersNameList(function(developersName){return developersName.filter(function(dev){return dev===name;});});else setDevelopersNameList([].concat(_toConsumableArray(developersNameList),[name]));};var onEditSubmit=function onEditSubmit(event){event.preventDefault();dispatch(editProject(edit_url+\"/\"+(state===null||state===void 0?void 0:state.id),{id:state===null||state===void 0?void 0:state.id,creator:user._id,title:titleRef.current.value,developers:developersList},setLoading));navigate(\"/view-projects\");};var onCreateSubmit=function onCreateSubmit(event){event.preventDefault();if(titleRef.current.value.length>0){setErrors(null);dispatch(createProject(create_url,{creator:user._id,title:titleRef.current.value,developers:developersList},setLoading));navigate(\"/view-projects\");}else setErrors(\"Title cannot be empty\");};return isAuthorized&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-project-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"input\",{value:user===null||user===void 0?void 0:user._id,hidden:true}),/*#__PURE__*/_jsx(\"input\",{value:state===null||state===void 0?void 0:state.id,hidden:true,ref:idRef}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-title\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Project Title\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{defaultValue:state===null||state===void 0?void 0:state.title,ref:titleRef}),errors]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Assign Developers on this project\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{value:developersNameList}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),developers&&developers.map(function(developer,index){return/*#__PURE__*/_jsx(\"button\",{value:developer.name,onClick:function onClick(){addDeveloperToList(developer._id);addDevelopersNameToList(developer.name);},className:styles.developerBtn,children:developer.name},index);})]})]}),state!==null&&state!==void 0&&state.id?/*#__PURE__*/_jsx(\"button\",{onClick:onEditSubmit,className:styles.createProjectBtn,children:\"Edit Project\"}):/*#__PURE__*/_jsx(\"button\",{onClick:onCreateSubmit,className:styles.createProjectBtn,children:\"Create Project\"})]})]});};export default CreateProjects;","map":{"version":3,"names":["useEffect","useRef","useState","useDispatch","useAuthorize","useGetDevelopers","useLocation","useNavigate","useSnackbar","createProject","editProject","Header","styles","CreateProjects","isAuthorized","developers","titleRef","idRef","developersList","setDevelopersList","developersNameList","setDevelopersNameList","errors","setErrors","dispatch","navigate","user","JSON","parse","localStorage","getItem","state","loading","setLoading","create_url","process","env","REACT_APP_CREATE_PROJECT","edit_url","REACT_APP_EDIT_PROJECT","addDeveloperToList","developerId","includes","filter","dev","addDevelopersNameToList","name","developersName","onEditSubmit","event","preventDefault","id","creator","_id","title","current","value","onCreateSubmit","length","map","developer","index","developerBtn","createProjectBtn"],"sources":["/home/dev/Documents/bugzilla/server/client/src/components/Projects/CreateProjects.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\"\nimport { useDispatch } from \"react-redux\"\nimport { useAuthorize } from \"../../helpers/hooks/useAuthorize\"\nimport useGetDevelopers from \"../../helpers/hooks/useGetDevelopers\"\nimport { useLocation } from \"react-router-dom\"\nimport { useNavigate } from \"react-router-dom\"\nimport { useSnackbar } from \"react-simple-snackbar/dist\"\nimport { createProject } from \"../../redux/actions/userActions\"\nimport { editProject } from \"../../redux/actions/userActions\"\nimport { Header } from \"../index\"\n\nimport styles from \"../../assets/scss/createprojects.module.css\"\n\nconst CreateProjects = () => {\n  const isAuthorized = useAuthorize(\"projects\")\n  const developers = useGetDevelopers()\n  const titleRef = useRef()\n  const idRef = useRef()\n  const [developersList, setDevelopersList] = useState([])\n  const [developersNameList, setDevelopersNameList] = useState([])\n  const [errors, setErrors] = useState(null)\n  const dispatch = useDispatch()\n  const navigate = useNavigate()\n  const user = JSON.parse(localStorage.getItem(\"profile\"))\n  const { state } = useLocation()\n\n  const [loading, setLoading] = useState(false)\n  const create_url = process.env.REACT_APP_CREATE_PROJECT\n  const edit_url = process.env.REACT_APP_EDIT_PROJECT\n\n  const addDeveloperToList = (developerId) => {\n    if (developersList.includes(developerId))\n      setDevelopersList((developersList) =>\n        developersList.filter((dev) => dev === developerId)\n      )\n    else setDevelopersList([...developersList, developerId])\n  }\n  const addDevelopersNameToList = (name) => {\n    if (developersNameList.includes(name))\n      setDevelopersNameList((developersName) =>\n        developersName.filter((dev) => dev === name)\n      )\n    else setDevelopersNameList([...developersNameList, name])\n  }\n  const onEditSubmit = (event) => {\n    event.preventDefault()\n\n    dispatch(\n      editProject(\n        edit_url + \"/\" + state?.id,\n        {\n          id: state?.id,\n          creator: user._id,\n          title: titleRef.current.value,\n          developers: developersList,\n        },\n        setLoading\n      )\n    )\n    navigate(\"/view-projects\")\n  }\n\n  const onCreateSubmit = (event) => {\n    event.preventDefault()\n    if (titleRef.current.value.length > 0) {\n      setErrors(null)\n      dispatch(\n        createProject(\n          create_url,\n          {\n            creator: user._id,\n            title: titleRef.current.value,\n            developers: developersList,\n          },\n          setLoading\n        )\n      )\n      navigate(\"/view-projects\")\n    } else setErrors(\"Title cannot be empty\")\n  }\n  return (\n    isAuthorized && (\n      <>\n        <Header />\n        <div className=\"create-project-wrapper\">\n          <div className=\"card p-4\">\n            <input value={user?._id} hidden></input>\n            <input value={state?.id} hidden ref={idRef} />\n            <div className=\"card-title\">\n              <label>Project Title</label>\n\n              <br />\n              <input defaultValue={state?.title} ref={titleRef} />\n              {errors}\n            </div>\n            <div>\n              <label>Assign Developers on this project</label>\n              <br />\n              <input value={developersNameList}></input>\n              <br />\n              <br />\n              {developers &&\n                developers.map((developer, index) => {\n                  return (\n                    <button\n                      key={index}\n                      value={developer.name}\n                      onClick={() => {\n                        addDeveloperToList(developer._id)\n                        addDevelopersNameToList(developer.name)\n                      }}\n                      className={styles.developerBtn}\n                    >\n                      {developer.name}\n                    </button>\n                  )\n                })}\n            </div>\n          </div>\n          {state?.id ? (\n            <button onClick={onEditSubmit} className={styles.createProjectBtn}>\n              Edit Project\n            </button>\n          ) : (\n            <button\n              onClick={onCreateSubmit}\n              className={styles.createProjectBtn}\n            >\n              Create Project\n            </button>\n          )}\n        </div>\n      </>\n    )\n  )\n}\n\nexport default CreateProjects\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}